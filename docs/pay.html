<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AgentForge ‚Äî Subscribe</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#0d1117;color:#e6edf3;line-height:1.6;display:flex;justify-content:center;padding:40px 20px}
.container{max-width:500px;width:100%}
h1{text-align:center;font-size:1.8em;margin-bottom:8px}
.sub{text-align:center;color:#8b949e;margin-bottom:30px}
.plans{display:grid;gap:12px;margin-bottom:30px}
.plan{background:#161b22;border:2px solid #30363d;border-radius:10px;padding:20px;cursor:pointer;transition:border-color 0.2s}
.plan:hover,.plan.selected{border-color:#ff6b35}
.plan h3{display:flex;justify-content:space-between;align-items:center}
.plan .price{color:#ff6b35;font-size:1.2em;font-weight:700}
.plan p{color:#8b949e;font-size:0.85em;margin-top:4px}
.pay-section{background:#161b22;border:1px solid #30363d;border-radius:10px;padding:24px;text-align:center;display:none}
.pay-section.active{display:block}
.pay-section h3{margin-bottom:12px}
.address{background:#0d1117;border:1px solid #30363d;border-radius:6px;padding:12px;font-family:monospace;font-size:0.8em;word-break:break-all;margin:12px 0;cursor:pointer}
.address:hover{border-color:#ff6b35}
.copy-btn{background:#ff6b35;color:#fff;border:none;padding:10px 24px;border-radius:6px;font-size:0.95em;cursor:pointer;margin-top:8px}
.copy-btn:hover{opacity:0.9}
.note{color:#8b949e;font-size:0.8em;margin-top:16px}
.spinner{display:none;margin:16px auto}
.waiting{color:#f7c948;font-size:0.9em;margin-top:12px}
.success{color:#3fb950;font-size:1em;margin-top:12px;display:none}
.back{display:block;text-align:center;color:#8b949e;margin-top:20px;text-decoration:none}
.back:hover{color:#e6edf3}
</style>
</head>
<body>
<div class="container">
<h1>üî• AgentForge</h1>
<p class="sub">Choose your plan</p>

<div class="plans">
<div class="plan" data-plan="pro" data-amount="19" onclick="selectPlan(this)">
<h3><span>Pro</span><span class="price">$19/mo</span></h3>
<p>5 AI Agents ‚Ä¢ Auto updates ‚Ä¢ Email support</p>
</div>
<div class="plan" data-plan="team" data-amount="49" onclick="selectPlan(this)">
<h3><span>Team</span><span class="price">$49/mo</span></h3>
<p>Unlimited Agents ‚Ä¢ Priority support ‚Ä¢ Custom templates</p>
</div>
</div>

<div class="pay-section" id="paySection">
<h3>üí≥ Pay with USDC (Polygon)</h3>
<p>Send exactly <strong id="payAmount">$19</strong> USDC to:</p>
<div class="address" id="payAddress" onclick="copyAddress()">Loading...</div>
<button class="copy-btn" onclick="copyAddress()">üìã Copy Address</button>
<p class="waiting" id="waitingMsg">‚è≥ Waiting for payment...</p>
<p class="success" id="successMsg">‚úÖ Payment received! Check your email for access.</p>
<p class="note">Network: Polygon (MATIC) ‚Ä¢ Token: USDC ‚Ä¢ Min: $0.50<br>Payment is processed automatically. Please send the exact amount.</p>
</div>

<a href="index.html" class="back">‚Üê Back to AgentForge</a>
</div>

<script>
const WALLET = '0xbaabab52d9f359dabad5650c3a0e8f9538da9610';
const CALLBACK_BASE = 'https://96.30.205.225:8082/webhook';

let selectedPlan = null;

function selectPlan(el) {
  document.querySelectorAll('.plan').forEach(p => p.classList.remove('selected'));
  el.classList.add('selected');
  selectedPlan = el.dataset.plan;
  const amount = el.dataset.amount;
  document.getElementById('payAmount').textContent = '$' + amount;
  document.getElementById('paySection').classList.add('active');
  createPayment(amount);
}

async function createPayment(amount) {
  const addr = document.getElementById('payAddress');
  addr.textContent = 'Generating payment address...';
  try {
    const callback = encodeURIComponent(CALLBACK_BASE + '?plan=' + selectedPlan + '&amount=' + amount);
    const resp = await fetch('https://api.cryptapi.io/polygon/usdc/create/?callback=' + callback + '&address=' + WALLET);
    const data = await resp.json();
    if (data.status === 'success') {
      addr.textContent = data.address_in;
    } else {
      addr.textContent = 'Error generating address. Please try again.';
    }
  } catch (e) {
    addr.textContent = 'Error: ' + e.message;
  }
}

function copyAddress() {
  const addr = document.getElementById('payAddress').textContent;
  if (addr && !addr.startsWith('Error') && !addr.startsWith('Loading') && !addr.startsWith('Generating')) {
    navigator.clipboard.writeText(addr).then(() => {
      const btn = document.querySelector('.copy-btn');
      btn.textContent = '‚úÖ Copied!';
      setTimeout(() => btn.textContent = 'üìã Copy Address', 2000);
    });
  }
}
</script>
</body>
</html>
